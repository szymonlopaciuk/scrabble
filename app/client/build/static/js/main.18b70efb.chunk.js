(this.webpackJsonpscrabble=this.webpackJsonpscrabble||[]).push([[0],{115:function(e,a,t){},116:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(12),s=t.n(r),i=(t(58),t(59),t(60),t(61),t(6)),c=t(7),o=t(9),d=t(8),m=(t(62),t(3)),p=function(){return n.a.createElement(m.a,{autoClose:8e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})},u=t(25),v=t.n(u),b=t(49),E=t(2),g=t(52),f=t(50),h=t.n(f),N={A:1,E:1,I:1,N:1,O:1,R:1,S:1,W:1,Z:1,C:2,D:2,K:2,L:2,M:2,P:2,T:2,Y:2,B:3,G:3,H:3,J:3,"\u0141":3,U:3,"\u0104":5,"\u0118":5,F:5,"\xd3":5,"\u015a":5,"\u017b":5,"\u0106":6,"\u0143":7,"\u0179":9},y={dL:2,tL:3,dW:2,tW:3},P=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(i.a)(this,t),(l=a.call(this,e)).populateModal=function(e){var a=document.createElement("div");a.setAttribute("class","bagPieceContainer");for(var t=function(){var e,t=r[n],s=document.createElement("div");s.setAttribute("class","bagPieceItem"),e="<div class='piece'><span class=\"letter\">".concat(t,"</span></div>"),s.innerHTML=e,s.addEventListener("click",(function(){l.setState({blankPiece:s.firstChild.firstChild.innerText}),l.toggleSelectionModal()})),a.appendChild(s)},n=0,r=Object.keys(e);n<r.length;n++)t();document.getElementById("selectionHome").appendChild(a)},l.toggleSelectionModal=function(){document.getElementById("selectionModal").classList.toggle("is-active")},l.getTilePositionOnBoard=function(e){var a=document.querySelectorAll(".tile");return[].indexOf.call(a,e)},l.populateBoard=function(e,a){var t=document.createElement("div");t.setAttribute("id","jp_".concat(a)),t.setAttribute("class","bp"),t.innerHTML=e,document.querySelectorAll(".tile")[a].appendChild(t)},l.updatePlay=function(e){if("drag"===e.eventType){if(e.name!==l.props.name){var a=document.querySelector("#".concat(e.id));null!==a&&a.remove()}}else"rackToBoard"===e.eventType||"boardToRack"===e.eventType?e.name!==l.props.name&&l.populateBoard(e.elementString,e.elementPosition):"bagNearEmpty"===e.eventType?l.state.swappable&&(l.setState({swappable:!1}),m.b.warn(e.message)):document.getElementById(e.id).firstChild.firstChild.innerText=e.pieceLetter},l.updateBlankPiece=function(e){if(""===l.state.blankPiece)setTimeout((function(){l.updateBlankPiece(e)}),200);else{var a=l.state.blankPiece;l.props.socket.emit("inPlayEvent",{roomID:l.props.roomID,pieceLetter:a,eventType:"updateBlank",id:e}),l.setState({blankPiece:""})}},l.componentDidMount=function(){l.populateModal(N),document.addEventListener("dragstart",(function(e){if(l.props.isTurn&&!l.props.gameEnded)try{var a=Object(E.a)(e.target.classList);(a.includes("pieceContainer")||a.includes("bp"))&&(a.includes("bp")&&l.setState({isBoardToBoardDrag:!0}),a.includes("pieceContainer")&&l.setState({isRackToBoardDrag:!0}),l.setState({currentPiece:e.target}))}catch(t){m.b.error("Invalid drag motion.")}else{if(l.props.gameEnded)return void m.b.error("The game has ended. No moves are valid.");e.target.getAttribute("draggable")&&m.b.error("It's not your turn, ".concat(l.props.name,". Kindly wait your turn."))}})),document.addEventListener("dragenter",(function(e){e.preventDefault(),l.props.isTurn&&!l.props.gameEnded&&(l.state.isBoardToBoardDrag||l.state.isRackToBoardDrag)&&(e.target.className&&e.target.classList.contains("droppable")&&(e.target.style.border="0.4px solid yellow"),e.target.className&&e.target.classList.contains("rackPieces")&&!l.state.currentPiece.classList.contains("pieceContainer")&&l.setState({isBoardToRackDrag:!0,isBoardToBoardDrag:!1}))})),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragleave",(function(e){l.props.isTurn&&!l.props.gameEnded&&e.target.removeAttribute("style")})),document.addEventListener("drop",(function(e){if(e.preventDefault(),l.props.isTurn&&!l.props.gameEnded){e.target.removeAttribute("style");var a=l.state.currentPiece;if((e.target.classList.contains("droppable")||e.target.classList.contains("rackPieces"))&&null!==a){var t=Object(E.a)(a.classList);if(t.includes("pieceContainer")||t.includes("bp")){if(l.state.isBoardToRackDrag){var n=a.parentNode.children,r=1===n.length?0:1,s=l.props.getPiecesOnRack();s.push({letter:"0"===a.firstChild.lastChild.innerText?"":a.textContent.slice(0,1),value:parseInt(a.textContent.slice(1))}),l.props.populateRack(s),a.parentNode.removeChild(n[r]),l.props.socket.emit("inPlayEvent",{roomID:l.props.roomID,name:l.props.name,eventType:"drag",id:a.id})}else{var i=l.getTilePositionOnBoard(e.target);if(-1!==i){var c=document.createElement("div");if(c.setAttribute("draggable","true"),c.setAttribute("id","jp_".concat(i)),c.setAttribute("class","bp"),""===a.firstChild.firstChild.innerText&&(l.toggleSelectionModal(),l.updateBlankPiece("jp_".concat(i))),c.innerHTML=a.innerHTML,e.target.appendChild(c),l.state.isBoardToBoardDrag){var o=a.parentNode.children,d=1===o.length?0:1;a.parentNode.removeChild(o[d]),l.setState({isBoardToBoardDrag:!1}),l.props.socket.emit("inPlayEvent",{roomID:l.props.roomID,name:l.props.name,eventType:"drag",id:a.id})}else{var m=document.getElementById(a.id);m&&m.remove()}l.props.socket.emit("inPlayEvent",{name:l.props.name,eventType:"rackToBoard",roomID:l.props.roomID,elementString:c.innerHTML,elementPosition:i})}}l.setState({currentPiece:null,isBoardToRackDrag:!1,isRackToBoardDrag:!1})}}}})),l.props.socket.on("inPlay",(function(e){l.updatePlay(e)}))},l.state={blankPiece:"",swappable:!0,currentPiece:null,isRackToBoardDrag:!1,isBoardToRackDrag:!1,isBoardToBoardDrag:!1},l}return Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:{width:"765px"}},n.a.createElement("div",{id:"selectionModal",className:"modal"},n.a.createElement("div",{className:"modal-background"}),n.a.createElement("div",{className:"modal-card bagItems"},n.a.createElement("section",{id:"selectionHome",className:"modal-card-body"},n.a.createElement("div",{className:"centralize title is-4"},n.a.createElement("p",null,"Choose A Letter..."))))),n.a.createElement("div",{className:"boardContainer"},n.a.createElement("div",{className:"board"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile tW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tW"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile tW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW cT"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tW"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dW"}),n.a.createElement("div",{className:"droppable tile"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"droppable tile tW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tW"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile dL"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile"}),n.a.createElement("div",{className:"droppable tile tW"}))),n.a.createElement("div",{className:"legend"},n.a.createElement("div",{title:"A piece must be played on this tile at the beginning of the game",className:"legendItem"},n.a.createElement("span",{className:"legendColor legendStart"}),n.a.createElement("span",null,"Start Point")),n.a.createElement("div",{title:"The total score of the word played is doubled when a piece is on this tile",className:"legendItem"},n.a.createElement("span",{className:"legendColor legendDW"}),n.a.createElement("span",null,"Double Word")),n.a.createElement("div",{title:"The total score of the letter on this tile is doubled",className:"legendItem"},n.a.createElement("span",{className:"legendColor legendDL"}),n.a.createElement("span",null,"Double Letter")),n.a.createElement("div",{title:"The total score of the word played is tripled when a piece is on this tile",className:"legendItem"},n.a.createElement("span",{className:"legendColor legendTW"}),n.a.createElement("span",null,"Triple Word")),n.a.createElement("div",{title:"The total score of the letter on this tile is tripled",className:"legendItem"},n.a.createElement("span",{className:"legendColor legendTL"}),n.a.createElement("span",null,"Triple Letter")))))}}]),t}(n.a.Component),k=t(51),T=t(10),w=t.n(T);w.a.defaults.baseURL="".concat(window.hostURL,"/api/v1"),w.a.defaults.headers.post["Content-Type"]="application/json",w.a.defaults.headers.common.Authorization="Bearer ".concat(window.b2ctk),w.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),w.a.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}));var I=function(e){return w.a[e.requestType](e.url,e.payload).then((function(e){return e.data})).catch((function(e){return console.log(e.data)}))},L=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(i.a)(this,t),(l=a.call(this,e)).updatePlayWeight=function(e,a,t){a.includes("bp")&&(e.includes("dL")?l.playWeights.push([].concat(Object(E.a)(t),["dL"])):e.includes("tL")?l.playWeights.push([].concat(Object(E.a)(t),["tL"])):e.includes("dW")?l.playWeights.push([].concat(Object(E.a)(t),["dW"])):e.includes("tW")&&l.playWeights.push([].concat(Object(E.a)(t),["tW"])))},l.getPiecesAbove=function(e){var a=[],t=15;if(l.isBoardEdge("top",e))return a;for(;;){var n=e-t,r=l.boardTiles[n];if(null===r.firstChild)break;if(a.unshift(l.getPieceAttrs(r.firstChild,n)),t+=15,l.isBoardEdge("top",n))break}return a},l.getPiecesBelow=function(e){var a=[],t=15;if(l.isBoardEdge("down",e))return a;for(;;){var n=e+t,r=l.boardTiles[n];if(null===r.firstChild)break;if(a.push(l.getPieceAttrs(r.firstChild,n)),t+=15,l.isBoardEdge("down",n))break}return a},l.getPiecesLeft=function(e){var a=[],t=1;if(l.isBoardEdge("left",e))return a;for(;;){var n=e-t,r=l.boardTiles[n];if(null===r.firstChild)break;if(a.unshift(l.getPieceAttrs(r.firstChild,n)),t+=1,l.isBoardEdge("left",n))break}return a},l.getPiecesRight=function(e){var a=[],t=1;if(l.isBoardEdge("right",e))return a;for(;;){var n=e+t,r=l.boardTiles[n];if(null===r.firstChild)break;if(a.push(l.getPieceAttrs(r.firstChild,n)),t+=1,l.isBoardEdge("right",n))break}return a},l.getPieceAttrs=function(e,a){return[e.firstChild.textContent.slice(0,1),parseInt(e.firstChild.textContent.slice(1)),a]},l.isBoardEdge=function(e,a){return"top"===e?a>=0&&a<15:"down"===e?a>209&&a<225:"left"===e?a%15===0:a%15===14},l.getPlayedWords=function(e){var a,t,n=[],r=l.getPlayDirection.cachedDirection;return e.forEach((function(e,s){var i=l.getTilePositionOnBoard(e.parentNode),c=Object(E.a)(l.boardTiles[i].classList),o=Object(E.a)(e.classList),d=l.getPieceAttrs(l.boardTiles[i],i);l.updatePlayWeight(c,o,d);var m=l.getPiecesLeft(i),p=l.getPiecesAbove(i),u=l.getPiecesRight(i),v=l.getPiecesBelow(i);if(t=[d],a=[d],0===s){var b,g,f,h;if(0!==m.length)(b=t).unshift.apply(b,Object(E.a)(m));if(0!==u.length)(g=t).push.apply(g,Object(E.a)(u));if(t.length>1&&n.push(t),0!==p.length)(f=a).unshift.apply(f,Object(E.a)(p));if(0!==v.length)(h=a).push.apply(h,Object(E.a)(v));a.length>1&&n.push(a)}else if("right"===r){var N,y;if(0!==p.length)(N=a).unshift.apply(N,Object(E.a)(p));if(0!==v.length)(y=a).push.apply(y,Object(E.a)(v));a.length>1&&n.push(a)}else{var P,k;if(0!==m.length)(P=t).unshift.apply(P,Object(E.a)(m));if(0!==u.length)(k=t).push.apply(k,Object(E.a)(u));t.length>1&&n.push(t)}})),n},l.computeScore=function(e){var a=0;return e.words.forEach((function(e){var t=0,n=1;e.forEach((function(e){var a=e[1];l.playWeights.forEach((function(t){void 0!==e[2]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&(["dL","tL"].includes(t[3])?a*=y[t[3]]:["tW","dW"].includes(t[3])&&(n=y[t[3]]))})),t+=a})),a+=t*=n})),e.isBingo&&(a+=50),a},l.playTurn=function(){if(l.props.isTurn&&!l.props.gameEnded){l.playWeights=[];var e=l.props.getPlayedPieces();if(!(e.length>0))return void m.b.error("You haven't played anything. You can alternatively skip your turn.");if(!l.validateBoardPlay(e))return void m.b.error("Sorry, that's an invalid move.");var a=[],t=l.getPlayedWords(e);t.forEach((function(e){var t="";e.forEach((function(e){t+=e[0]})),a.push(t)})),I({requestType:"post",url:"/words-check",payload:{words:a}}).then((function(n){if(n.error)m.b.error(n.error);else{var r=l.props.getPiecesOnRack(),s=l.computeScore({words:t,isBingo:7===e.length});l.getFromBag(e.length).then((function(e){e.pieces.forEach((function(e){return r.push(e)}))})).then((function(){l.setState({currentPieces:r}),l.props.populateRack(r),l.props.socket.emit("playEvent",{numOfRem:r.length,roomID:l.props.roomID,name:l.props.name,word:a[0],score:s})}))}}))}},l.skipTurn=function(){l.props.isTurn&&!l.props.gameEnded&&(window.confirm("Are you sure you want to skip your turn?")&&(l.recallPieces(),l.props.socket.emit("playEvent",{isTurnSkipped:!0,name:l.props.name,roomID:l.props.roomID})))},l.swapPieces=function(){},l.getPlayDirection=function(e){for(var a=0,t="down",n=l.getTilePositionOnBoard(e[0].parentNode),r=1;r<16;r++){var s=n+r;if(s>224)break;var i=l.boardTiles[s].firstChild;null!==i&&Object(E.a)(i.classList).includes("bp")&&(15===r?(a+=15,t="down"):(a+=1,t="right"))}return!(a>15)&&t},l.validateBoardPlay=function(e){var a=!1,t=0===document.querySelectorAll(".vP").length,n=15;if(1===e.length){if(t)return!1;a=l.validateNearestNeighbours(e)>=1}else{var r=l.getPlayDirection(e);if(!1===r)return!1;if(l.getPlayDirection.cachedDirection=r,"right"===r&&(n=1),t){if(l.getValidPlayCount(e,n,t)<e.length-1)return!1;a=l.checkIfPlayWasCentered(e)}else{if(l.validateNearestNeighbours(e)<1)return!1;if(l.getValidPlayCount(e,n,t)<e.length-1)return!1;a=!0}}return a},l.validateNearestNeighbours=function(e){var a=0;return e.forEach((function(e){var t,n,r,s,i=[],c=l.getTilePositionOnBoard(e.parentNode);t=c-1,r=c+15,s=c+1,(n=c-15)>=0&&i.push(l.boardTiles[n]),t>=0&&i.push(l.boardTiles[t]),r<=224&&i.push(l.boardTiles[r]),s<=224&&i.push(l.boardTiles[s]),i.forEach((function(e){null!==e.firstChild&&Object(E.a)(e.firstChild.classList).includes("vP")&&(a+=1)}))})),a},l.getValidPlayCount=function(e,a,t){var n=0;return e.forEach((function(r,s){var i=l.getTilePositionOnBoard(r.parentNode),c=l.boardTiles[i+a],o=l.boardTiles[i-a];if(0===s)if(null===c.firstChild)n-=1;else{var d=Object(E.a)(c.firstChild.classList);(t?d.includes("bp"):d.includes("bp")||d.includes("vP"))&&(n+=1)}else if(s+1===e.length)if(null===o.firstChild)n-=1;else{var m=Object(E.a)(o.firstChild.classList);(t?m.includes("bp"):m.includes("bp")||m.includes("vP"))&&(n+=1)}else if(null===o.firstChild||null===c.firstChild)n-=1;else{var p,u,v=Object(E.a)(c.firstChild.classList),b=Object(E.a)(o.firstChild.classList);p=t?v.includes("bp"):v.includes("bp")||v.includes("vP"),u=t?b.includes("bp"):b.includes("bp")||b.includes("vP"),p&&u&&(n+=1)}})),n},l.checkIfPlayWasCentered=function(e){var a=!1;return e.forEach((function(e){var t=l.boardTiles[l.getTilePositionOnBoard(e.parentNode)];Object(E.a)(t.classList).includes("cT")&&(a=!0)})),a},l.getTilePositionOnBoard=function(e){return[].indexOf.call(l.boardTiles,e)},l.makeDraw=function(e){e.preventDefault();var a=l.inPlaceShuffle(l.props.players);l.props.socket.emit("drawEvent",{playOrder:a,roomID:l.props.roomID});var t=document.getElementById("drawButton");null!==t&&t.remove()},l.getFromBag=function(e){return I({payload:{},requestType:"get",url:"/bag/".concat(e,"?roomID=").concat(l.props.roomID)})},l.clearPlayedPieces=function(){var e=l.props.getPlayedPieces();e.length>0&&e.forEach((function(e){return e.remove()}))},l.shufflePieces=function(){var e=l.props.getPiecesOnRack();l.props.populateRack(l.inPlaceShuffle(e))},l.recallPieces=function(){l.props.isTurn&&!l.props.gameEnded&&(l.clearPlayedPieces(),l.props.populateRack(l.state.currentPieces),l.props.socket.emit("recallEvent",{name:l.props.name,roomID:l.props.roomID}))},l.inPlaceShuffle=function(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),l=e[a];e[a]=e[t],e[t]=l}return e},l.toggleBag=function(){if(0!==Object.keys(l.props.bagItems).length){var e=document.getElementById("bagHome");e.innerHTML="",e.appendChild(l.updateBag(l.props.bagItems)),document.getElementById("bagModal").classList.toggle("is-active")}else m.b.info("Kindly wait until the draw has been made.")},l.updateBag=function(e){var a=document.createElement("div");a.setAttribute("class","bagPieceContainer");var t,l=Object(k.a)(e);try{for(l.s();!(t=l.n()).done;){var n,r=t.value,s=document.createElement("div");s.setAttribute("class","bagPieceItem"),n="<div><div class='piece'><span class=\"letter\">".concat(r[0],'</span></div></div>\n            <div class="numberLeft"><span>').concat(r[1]," left</span></div>"),s.innerHTML=n,a.appendChild(s)}}catch(i){l.e(i)}finally{l.f()}return a},l.isHTTPSContext=function(){l.setState({usesHTTPS:isSecureContext})},l.componentDidMount=function(){l.isHTTPSContext(),l.boardTiles=document.querySelectorAll(".tile"),l.props.socket.on("recallPieces",(function(e){e.name!==l.props.name&&l.clearPlayedPieces()})),l.getFromBag(7-l.state.currentPieces.length).then((function(e){l.setState({currentPieces:e.pieces},(function(){l.props.populateRack(l.state.currentPieces)}))}))},l.playWeights=[],l.boardTiles=null,l.state={usesHTTPS:!1,currentPieces:[]},l}return Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"rack"},n.a.createElement("div",{id:"bagModal",className:"modal"},n.a.createElement("div",{onClick:this.toggleBag,className:"modal-background"}),n.a.createElement("div",{className:"modal-card bagItems"},n.a.createElement("section",{id:"bagHome",className:"modal-card-body"}))),n.a.createElement("div",{className:"rackPieces"}),n.a.createElement("div",{className:"rackButtons"},n.a.createElement("div",{style:{cursor:"pointer"},title:"Bag with ".concat(this.props.bagLength," remaining pieces"),onClick:this.toggleBag,className:"bag"},n.a.createElement("span",null,n.a.createElement("i",{className:"fa fa-shopping-bag fa-2x"})),n.a.createElement("span",{className:"bagLength"},this.props.bagLength)),n.a.createElement("div",{className:"buttons is-fullwidth has-addons"},this.state.usesHTTPS?n.a.createElement("button",{id:"micstatus",title:"Record",onClick:this.props.changeRecordingStatus,className:"button rackButton is-dark"},n.a.createElement("i",{className:"fas fa-microphone-alt-slash"})):null,n.a.createElement("button",{title:"Recall Pieces",onClick:this.recallPieces,className:"button rackButton is-link"},n.a.createElement("i",{className:"fas fa-undo"})),n.a.createElement("button",{title:"Shuffle Pieces",onClick:this.shufflePieces,className:"button rackButton is-link"},n.a.createElement("i",{className:"fas fa-random"})),n.a.createElement("button",{title:"Skip Turn",onClick:this.skipTurn,className:"button rackButton is-link"},n.a.createElement("i",{className:"fas fa-forward"})),n.a.createElement("button",{title:"Play",className:"button rackButton is-success",onClick:this.playTurn},n.a.createElement("i",{className:"fas fa-play"})),this.props.isHost?n.a.createElement("button",{id:"drawButton",title:"Draw",className:"button rackButton is-warning",onClick:this.makeDraw},"Draw"):null)))}}]),t}(l.Component),B=function(e){var a=e.players.map((function(a,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",{id:"pid_".concat(a)},e.name===a?"".concat(a," (You)"):a),n.a.createElement("td",{id:"score_".concat(a)},"0"),n.a.createElement("td",{id:"turn_".concat(a)},"No"))}));return n.a.createElement("div",{className:"scoresTable"},n.a.createElement("table",{className:"table is-hoverable is-stripped is-fullwidth is-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Player"),n.a.createElement("th",null,"Score"),n.a.createElement("th",null,"Turn?"))),n.a.createElement("tbody",null,a)))};var C=function(e){var a=n.a.createElement("div",null,n.a.createElement("div",null,"Connected players: ",n.a.createElement("b",null,e.connectedPlayers,"/",e.numOfPlayers)),n.a.createElement("hr",null),n.a.createElement("div",{className:"subtitle is-7"},n.a.createElement("span",{role:"img","aria-label":"info"},"\u26a0\ufe0f")," Don't forget to share your Game ID with the other players you want to join your game session.")),t=n.a.createElement("div",null,n.a.createElement("div",null,"You're in the waiting room. The game will start once all players like you have joined the host's session.")),l=n.a.createElement("div",{className:"waitingMessage"},n.a.createElement("div",{className:"centralize title is-5"},n.a.createElement("span",null,"Waiting for all players to join...")),n.a.createElement("hr",null),n.a.createElement("div",null,"Your name: ",n.a.createElement("b",null,e.name)),n.a.createElement("div",null,"Game ID: ",n.a.createElement("b",null,e.roomID)),e.isHost?a:t);return n.a.createElement("div",null,l)};var D=function(e){return n.a.createElement("div",{className:"landing"},n.a.createElement("div",{className:"title centralize"},"SCRABBLE  ",n.a.createElement("span",{className:"tag is-warning"},"v1.2")),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{onClick:e.registerHost,className:"button mainButton is-success"},"Host Game")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{onClick:e.showJoinForm,className:"button mainButton is-link"},"Join Game"))),n.a.createElement("br",{className:"mt-5 mb-2"}),n.a.createElement("div",{className:"has-text-centered"},n.a.createElement("p",{className:"subtitle is-size-7"},"Made with \u2764\ufe0f by ",n.a.createElement("a",{href:"https://www.twitter.com/olumidesan",target:"_blank"},"@olumidesan"))))};var S=function(e){return n.a.createElement("div",{className:"joinForm"},n.a.createElement("form",null,n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Your Name: ",n.a.createElement("span",{className:"imp"},"*")),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",onChange:e.saveUser,name:"name",placeholder:"e.g. Smeagol"}))),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"field is-expanded"},n.a.createElement("label",{className:"label"},"Game ID: ",n.a.createElement("span",{className:"imp"},"*")),n.a.createElement("div",{className:"field has-addons"},n.a.createElement("p",{className:"control"},n.a.createElement("span",{className:"button is-static"},"SC-")),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",onChange:e.saveID,name:"gameID",placeholder:"e.g. 903318"}))))),n.a.createElement("div",{className:"centralize field is-grouped is-grouped-centered"},n.a.createElement("button",{style:{marginRight:"5px"},className:"button optionButton is-fullwidth is-link",onClick:e.joinRoom},"Join"),n.a.createElement("button",{style:{marginLeft:"5px"},className:"button optionButton is-fullwidth is-light",onClick:e.showHome},"Cancel"))))};var O=function(e){return n.a.createElement("div",{className:"configForm"},n.a.createElement("form",null,n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Your Name: ",n.a.createElement("span",{className:"imp"},"*")," "),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",onChange:e.saveUser,name:"text",placeholder:"e.g: Orihime"}))),n.a.createElement("div",{className:"control"},n.a.createElement("div",{className:"select is-fullwidth"},n.a.createElement("select",{onChange:e.savePlayers},n.a.createElement("option",{value:"",defaultValue:!0},"Choose the number of players"),n.a.createElement("option",{value:"2"},"2"),n.a.createElement("option",{value:"3"},"3"),n.a.createElement("option",{value:"4"},"4")))),n.a.createElement("br",null),n.a.createElement("div",{className:"centralize field is-grouped is-grouped-centered"},n.a.createElement("button",{style:{marginRight:"5px"},className:"button optionButton is-fullwidth is-link",onClick:e.startGame},"Start"),n.a.createElement("button",{style:{marginLeft:"5px"},className:"button optionButton is-fullwidth is-light",onClick:e.showHome},"Cancel"))))},j=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(i.a)(this,t),(l=a.call(this,e)).getPlayedPieces=function(){return document.querySelectorAll(".bp")},l.populateRack=function(e){for(var a=document.querySelector(".rackPieces");a.firstChild;)a.firstChild.remove();for(var t=0,l=Object.entries(e);t<l.length;t++){var n,r=Object(g.a)(l[t],2),s=r[0],i=r[1],c=document.createElement("div");c.setAttribute("id","userPiece".concat(s)),c.setAttribute("class","pieceContainer"),c.setAttribute("draggable","true"),n='<div draggable="false" class=\'piece\'><span draggable="false" class="letter">'.concat(i.letter,'</span><span draggable="false" class="value">').concat(i.value,"</span></div>"),c.innerHTML=n,a.appendChild(c)}},l.getPiecesOnRack=function(){var e=[];return document.querySelectorAll(".pieceContainer").forEach((function(a){e.push({letter:"0"===a.firstChild.lastChild.innerText?"":a.textContent.slice(0,1),value:"0"===a.firstChild.lastChild.innerText?0:parseInt(a.textContent.slice(1))})})),e},l.concretizePlayedPieces=function(){var e=l.getPlayedPieces();e.length>0&&e.forEach((function(e){e.removeAttribute("class"),e.removeAttribute("id"),e.setAttribute("class","vP"),e.setAttribute("draggable",!1),e.parentNode.setAttribute("draggable",!1)}))},l.showJoin=function(){document.querySelector(".landing").style.display="none",document.querySelector(".joinForm").style.display="block"},l.registerHost=function(){l.state.isHost||l.setState({isHost:!0,roomID:l.roomID}),document.querySelector(".landing").style.display="none",document.querySelector(".configForm").style.display="block"},l.saveID=function(e){l.setState({roomID:"SC-".concat(e.target.value).toString()})},l.saveUser=function(e){l.setState({name:e.target.value.trim()})},l.savePlayers=function(e){l.numOfPlayers=parseInt(e.target.value)},l.startGame=function(e){e.preventDefault(),l.state.name.length<3?m.b.error("Kindly enter a longer name. Don't be shy."):[2,3,4].includes(l.numOfPlayers)?(document.querySelector(".configForm").style.display="none",document.querySelector(".waitingMessage").style.display="block",l.socket.emit("join",{name:l.state.name,roomID:l.roomID})):m.b.error("Kindly select a valid number of players")},l.joinRoom=function(e){(e.preventDefault(),l.state.name.length<3)?m.b.error("Kindly enter a longer name. Don't be shy."):9===l.state.roomID.length?I({requestType:"get",url:"/rooms",payload:{}}).then((function(e){e.rooms.includes(l.state.roomID)?(l.socket.emit("join",{name:l.state.name,roomID:l.state.roomID}),document.querySelector(".joinForm").style.display="none",document.querySelector(".waitingMessage").style.display="block"):m.b.error("There's no game session with ID, ".concat(l.state.roomID,"."))})):m.b.error("Sorry, that's an invalid Game ID.")},l.showHome=function(e){e.preventDefault(),l.numOfPlayers=0,l.setState({isHost:!1,name:""}),document.querySelector(".landing").style.display="block",document.querySelector(".joinForm").style.display="none",document.querySelector(".configForm").style.display="none"},l.componentDidMount=function(){document.querySelector(".waitingMessage").style.display="none",document.querySelector(".joinForm").style.display="none",document.querySelector(".configForm").style.display="none",document.querySelector(".entry").style.display="none",window.addEventListener("beforeunload",l.beforeUnload),l.pingServer();var e=setInterval((function(){l.state.gameStarted&&l.pingServer()}),1e4);l.setState({intervalID:e}),l.socket.on("reconnect_attempt",(function(){l.socket.io.opts.transports=["polling","websocket"],document.getElementById("connstatus").setAttribute("title","Reconnecting..."),document.getElementById("connstatus").setAttribute("class","has-text-warning")})),l.socket.on("connect",(function(){document.getElementById("connstatus").setAttribute("title","Server Connection: Good"),document.getElementById("connstatus").setAttribute("class","has-text-success"),l.state.gameStarted&&l.socket.emit("join",{roomID:l.roomID,isReconnection:!0})})),l.socket.on("disconnect",(function(){l.state.gameStarted&&m.b.error("Lost connection to the game server. Trying to reconnect..."),document.getElementById("connstatus").setAttribute("title","Connection Lost"),document.getElementById("connstatus").setAttribute("class","has-text-danger")})),l.socket.on("joinedRoom",(function(e){l.state.gameStarted||l.setState({players:[].concat(Object(E.a)(l.state.players),[e.name]),connectedPlayers:l.state.connectedPlayers+1},(function(){l.state.isHost&&l.state.connectedPlayers===l.numOfPlayers&&l.socket.emit("gameStartEvent",{allPlayers:l.state.players,roomID:l.state.roomID,gameStarted:!0})}))})),l.socket.on("drawDone",(function(e){var a,t=e.playOrder[0],n="";l.setState({players:e.playOrder,bagLength:e.bagLength,bagItems:e.bagItems}),t===l.state.name?(l.setState({isTurn:!0}),a="You get to play first"):a="".concat(t," gets to play first"),document.getElementById("turn_".concat(t)).innerText="Yes",e.playOrder.forEach((function(a,t){a===l.state.name&&(a="".concat(a," (You)")),t+1===e.playOrder.length?n+=a:n+="".concat(a,", then ")})),m.b.warn("".concat(a,". Also note that the turn order is, ").concat(n,"."))})),l.socket.on("gameStart",(function(e){l.setState({gameStarted:!0,players:l.state.isHost?Object(E.a)(l.state.players):Object(E.a)(e.allPlayers),connectedPlayers:l.state.isHost?l.state.connectedPlayers:e.allPlayers.length}),document.querySelector(".entry").removeAttribute("style"),document.querySelectorAll(".configElements").forEach((function(e){e.remove()}));var a=l.state.isHost?"All players have joined. Make a draw using the yellow button on your button rack. You'll":"The host will make a draw, and you'll";m.b.success("\u2728 Welcome, ".concat(l.state.name,"! ").concat(a," be notified (just like this) of who gets to play first. Good luck!"))})),l.socket.on("gameEnd",(function(e){var a="",t={name:"",score:0};e.finalPlayerScores.forEach((function(e){document.getElementById("score_".concat(e.name)).innerText=e.score,e.score>t.score&&(t.name=e.name,t.score=e.score)})),a=l.state.name===t.name?"Congratulations, ".concat(t.name,"! You are the winner with ").concat(t.score," points."):"".concat(t.name," is the winner with ").concat(t.score," points. Good game, ").concat(l.state.name,"."),document.getElementById("pid_".concat(t.name)).innerText="".concat(document.getElementById("pid_".concat(t.name)).innerText," \ud83c\udfc6"),l.toggleModal(),document.getElementById("winner").innerText=a})),l.socket.on("voiceT",(function(e){var a=new Blob([e.audioBlob],{type:"audio/ogg; codecs=opus"}),t=document.getElementById("pid_".concat(e.name)),n=t.innerText;e.name!==l.state.name&&(t.innerText="".concat(n," \ud83d\udde3\ufe0f"),setTimeout((function(){l.audioElement.src=window.URL.createObjectURL(a),l.audioElement.play(),setTimeout((function(){t.innerText=n}),2e3)}),100))})),l.socket.on("validPlay",(function(e){var a,t;(l.concretizePlayedPieces(),e.playerToPlay===l.state.name?l.setState({isTurn:!0,bagItems:e.bagItems,bagLength:e.bagLength},(function(){return a="your turn to play"})):l.setState({isTurn:!1,bagItems:e.bagItems,bagLength:e.bagLength},(function(){return a="".concat(e.playerToPlay,"'s turn to play")})),l.state.players.forEach((function(a){a===e.playerToPlay?document.getElementById("turn_".concat(a)).innerText="Yes":document.getElementById("turn_".concat(a)).innerText="No"})),e.isTurnSkipped)?t=e.name===l.state.name?"You skipped your turn":t="Turn skipped by ".concat(e.name):(t=e.name===l.state.name?'You played "'.concat(e.word,'" worth ').concat(e.score," points"):"".concat(e.name,' played "').concat(e.word,'" worth ').concat(e.score," points"),document.getElementById("score_".concat(e.name)).innerText=e.updatedScore);if(0===e.numOfRem&&0===e.bagLength){var n=0;m.b.info("".concat(t,".")),l.setState({gameEnded:!0}),n=parseInt(document.getElementById("score_".concat(l.state.name)).innerText),l.getPiecesOnRack().forEach((function(e){n-=e.value})),I({requestType:"post",url:"/scores",payload:{roomID:l.state.roomID,name:l.state.name,score:n}}).then((function(){l.socket.emit("finalBoardUpdate",{roomID:l.state.roomID})}))}else{var r="";m.b.info("".concat(t,". It's ").concat(a,".")),r=0===e.bagLength?"No pieces are left in the bag":1===e.bagLength?"Only one piece is left in the bag":"Only ".concat(e.bagLength," pieces are left in the bag."),e.bagLength<=7&&l.socket.emit("inPlayEvent",{roomID:l.state.roomID,eventType:"bagNearEmpty",message:"Heads up: ".concat(r)})}}))},l.audioTransmissionHandler=function(e){var a,t=new MediaRecorder(e);if(l.md=t,t.onstart=function(e){a=[]},t.ondataavailable=function(e){e.data.size>0&&a.push(e.data)},t.onstop=function(e){var t=new Blob(a,{type:"audio/ogg; codecs=opus"});l.socket.emit("radio",{audioBlob:t,name:l.state.name,roomID:l.state.roomID})},l.state.isRecording)t.start();else try{t.stop()}catch(n){}},l.changeRecordingStatus=function(){l.setState({isRecording:!l.state.isRecording},(function(){!0===l.state.isRecording?(document.getElementById("micstatus").innerHTML='<i class="fa fa-microphone-alt"></i>',l.recordAudio()):(document.getElementById("micstatus").innerHTML='<i class="fa fa-microphone-alt-slash"></i>',l.md.stop())}))},l.recordAudio=function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(l.audioTransmissionHandler)},l.toggleModal=function(){document.getElementById("endModal").classList.toggle("is-active")},l.beforeUnload=function(){l.socket.emit("leave",{roomID:l.state.roomID})},l.componentWillUnmount=function(){window.removeEventListener("beforeunload",l.beforeUnload)},l.componentWillUnmount=function(){clearInterval(l.state.intervalID),window.removeEventListener("beforeunload",l.beforeUnload)},l.pingServer=Object(b.a)(v.a.mark((function e(){var a,t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,e.next=3,I({requestType:"get",url:"/ping",payload:{}});case 3:"pingSuccess"===e.sent.status&&(t=new Date,n=t.getTime()-a.getTime(),l.setState({serverPing:n}));case 5:case"end":return e.stop()}}),e)}))),l.numOfPlayers=0,l.audioElement=document.getElementById("audioT"),l.socket=h()(window.hostURL,{transports:["websocket"]}),l.md=null,l.roomID="SC-".concat(window.crypto.getRandomValues(new Uint32Array(1))[0].toString().slice(0,6)),l.state={name:"",roomID:"",players:[],bagItems:{},isTurn:!1,isHost:!1,serverPing:0,intervalID:"",bagLength:100,gameEnded:!1,isRecording:!1,gameStarted:!1,connectedPlayers:0},l}return Object(c.a)(t,[{key:"render",value:function(){var e=n.a.createElement("div",{className:"configElements"},n.a.createElement(D,{registerHost:this.registerHost,showJoinForm:this.showJoin}),n.a.createElement(O,{savePlayers:this.savePlayers,saveUser:this.saveUser,showHome:this.showHome,startGame:this.startGame}),n.a.createElement(S,{saveID:this.saveID,saveUser:this.saveUser,joinRoom:this.joinRoom,showHome:this.showHome}),n.a.createElement(C,{name:this.state.name,roomID:this.state.roomID,isHost:this.state.isHost,numOfPlayers:this.numOfPlayers,connectedPlayers:this.state.connectedPlayers})),a=n.a.createElement("div",{className:"entry columns is-vcentered"},n.a.createElement("div",{className:"column is-two-thirds",style:{paddingRight:"40px"}},n.a.createElement(P,{socket:this.socket,name:this.state.name,isTurn:this.state.isTurn,roomID:this.state.roomID,populateRack:this.populateRack,gameEnded:this.state.gameEnded,getPiecesOnRack:this.getPiecesOnRack})),n.a.createElement("div",{className:"column"}),n.a.createElement("div",{className:"column"}),n.a.createElement("div",{className:"column is-one-third",style:{paddingLeft:"40px"}},n.a.createElement("div",{className:"extras"},n.a.createElement("div",{className:"connection"},n.a.createElement("span",{id:"connstatus"},n.a.createElement("i",{className:"fas fa-wifi"})),n.a.createElement("span",{id:"connstatus",style:{paddingLeft:"10px"},className:"has-text-grey"},this.state.serverPing,"ms")),n.a.createElement(B,{name:this.state.name,players:this.state.players}),this.state.gameStarted?n.a.createElement(L,{socket:this.socket,name:this.state.name,roomID:this.state.roomID,isHost:this.state.isHost,isTurn:this.state.isTurn,players:this.state.players,bagItems:this.state.bagItems,bagLength:this.state.bagLength,populateRack:this.populateRack,gameEnded:this.state.gameEnded,gameStarted:this.state.gameStarted,getPlayedPieces:this.getPlayedPieces,getPiecesOnRack:this.getPiecesOnRack,changeRecordingStatus:this.changeRecordingStatus}):null)));return n.a.createElement("div",{className:"gameSpace"},n.a.createElement("div",{id:"endModal",className:"modal"},n.a.createElement("div",{onClick:this.toggleModal,className:"modal-background"}),n.a.createElement("div",{className:"modal-card bagItems"},n.a.createElement("section",{className:"modal-card-body"},n.a.createElement("div",{className:"endMessage"},n.a.createElement("div",{className:"centralize trophy"},n.a.createElement("span",{role:"img","aria-label":"trophy"},"\ud83c\udfc6")),n.a.createElement("div",{id:"winner",className:"subtitle is-5"}))))),a,e)}}]),t}(l.Component),R=(t(115),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(j,null),n.a.createElement(p,null))}}]),t}(n.a.Component));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root"))},53:function(e,a,t){e.exports=t(116)},58:function(e,a,t){},59:function(e,a,t){},61:function(e,a,t){},96:function(e,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.18b70efb.chunk.js.map